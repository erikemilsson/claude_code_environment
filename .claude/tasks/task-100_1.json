{
  "id": "100_1",
  "title": "Design spec builder question flow and structure",
  "description": "Design the guided question flow for interactive spec creation. Define core questions (project goals, technologies, domain, constraints, success criteria), question ordering, validation rules, and how answers map to spec sections. Review task 91 spec templates to ensure compatibility.",
  "difficulty": 4,
  "status": "Finished",
  "completion_date": "2025-12-18",
  "created_date": "2025-12-18",
  "updated_date": "2025-12-18",
  "dependencies": [],
  "subtasks": [],
  "parent_task": "100",
  "files_affected": [],
  "notes": "Foundation subtask - defines what questions to ask and in what order. Must align with spec templates from task 91.\n\n=== QUESTION FLOW DESIGN (COMPLETED) ===\n\nDesigned an adaptive 8-question flow that creates detection-optimized specs:\n\n**QUESTION 1: Project Name**\n- Prompt: \"What is your project name?\"\n- Type: Single-line text (required)\n- Validation: 3-100 characters, no special chars except hyphen/underscore\n- Maps to: Document title (H1 heading)\n- Example: \"Pension Regulatory Calculator\"\n\n**QUESTION 2: Project Type (Template Hint)**\n- Prompt: \"What type of project is this?\"\n- Type: Single-select with \"Other\" option\n- Options:\n  [ ] Power Query/Excel calculation project\n  [ ] Research or analysis study  \n  [ ] Personal/life project (fitness, learning, home)\n  [ ] Documentation or content creation\n  [ ] General software development\n  [ ] Other (please describe)\n- Validation: Required\n- Maps to: Determines keyword injection strategy + template selection confidence\n- Purpose: User self-identifies primary domain, guides question branching\n\n**QUESTION 3: Project Description**\n- Prompt: \"What are you building? (2-3 sentences)\"\n- Type: Multi-line text (required)\n- Validation: 50-500 characters\n- Maps to: \"What I'm Building\" or \"What I Want to Achieve\" section\n- Context injection: Prepend domain-specific phrases based on Q2:\n  - Power Query: \"Power Query solution for...\"\n  - Research: \"Research study investigating...\"\n  - Life: \"My personal goal is to...\"\n  - Documentation: \"Documentation project to create...\"\n  - General: Direct text\n- Examples:\n  - Power Query: \"Implement CEM-06 pension compliance calculations from regulatory PDF using M language in Excel\"\n  - Research: \"Investigate how remote work impacts productivity through survey analysis and statistical testing\"\n  - Life: \"Run a half-marathon in under 2 hours by building from zero running experience to 21K distance\"\n\n**QUESTION 4: Technology Stack**\n- Prompt: \"What technologies/tools will you use?\"\n- Type: Multi-line text or comma-separated (required)\n- Validation: At least 1 technology mentioned\n- Maps to: \"Technology Stack\" section\n- Smart parsing:\n  - Detect languages: Python, JavaScript, Java, C++, Go, R, etc.\n  - Detect frameworks: React, Django, Flask, Express, Spring, etc.\n  - Detect tools: Excel, Power Query, Jupyter, VS Code, etc.\n  - Detect databases: PostgreSQL, MongoDB, SQL Server, etc.\n- Keyword injection: Keep verbatim (user's explicit technology mentions boost detection)\n- Examples:\n  - \"Power Query (M language), Excel 365, SQL Server\"\n  - \"Python (pandas, scipy, statsmodels), Jupyter notebooks, R for visualization\"\n  - \"Just a notebook and Strava app\"\n\n**QUESTION 5: Project Goals**\n- Prompt: \"What are your main goals? (3-5 bullet points)\"\n- Type: Multi-line text (required)\n- Validation: At least 2 goals\n- Maps to: \"Goals\" or \"Objectives\" section\n- Format: Convert to checklist (- [ ] format)\n- Domain-specific guidance:\n  - Power Query: \"e.g., Automate regulatory calculations, ensure compliance, replace manual formulas\"\n  - Research: \"e.g., Test hypothesis, publish findings, contribute to field\"\n  - Life: \"e.g., Complete half-marathon, improve fitness, build consistent habit\"\n- Examples:\n  - \"Automate pension calculations\"\n  - \"Ensure CEM-06 compliance\"\n  - \"Reduce manual errors\"\n\n**QUESTION 6: Timeline/Duration**\n- Prompt: \"How long do you expect this project to take?\"\n- Type: Single-select with custom option\n- Options:\n  [ ] Weekend project (2-3 days)\n  [ ] Sprint (1-2 weeks)\n  [ ] Multi-week (1-3 months)\n  [ ] Long-term (3+ months)\n  [ ] Custom (specify)\n- Validation: Required\n- Maps to: \"Timeline\" section\n- Smart extraction: If \"Custom\", parse natural language (\"2 months\", \"by June\", etc.)\n- Also ask optional deadline: \"Any specific deadline? (optional)\"\n\n**QUESTION 7: Key Requirements (Domain-Specific)**\n- **Prompt varies by project type (Q2)**:\n  - **Power Query**: \"What are your key requirements? Include: data sources, calculation logic, output format\"\n  - **Research**: \"Describe your methodology: research question, hypothesis, data collection approach, analysis plan\"\n  - **Life Project**: \"What are your milestones and weekly habits?\"\n  - **Documentation**: \"What sections will your documentation include? Who is the audience?\"\n  - **General**: \"List your main features or deliverables (3-10 items)\"\n- Type: Multi-line text (required)\n- Validation: At least 100 characters\n- Maps to: Domain-specific sections:\n  - Power Query → \"Data Sources\", \"Requirements\", \"Calculation Logic\"\n  - Research → \"Research Question\", \"Hypothesis\", \"Methodology\"\n  - Life → \"Milestones\", \"Weekly Habits\"\n  - Documentation → \"Scope & Content\", \"Target Audience\"\n  - General → \"Requirements & Deliverables\"\n- Keyword injection opportunity: Parse user input for domain terms, reinforce in spec text\n\n**QUESTION 8: Additional Context (Optional)**\n- Prompt: \"Anything else we should know? (challenges, constraints, special requirements) - Optional\"\n- Type: Multi-line text (optional)\n- Validation: None (0-1000 characters)\n- Maps to: \"Additional Context\", \"Known Challenges\", or domain-specific sections\n- Smart parsing:\n  - If mentions \"regulatory\", \"compliance\", \"PDF\", \"ambiguous\" → Flag for Phase 0 workflow\n  - If mentions \"IRB\", \"ethics\" → Add to \"Ethical Considerations\" (Research)\n  - If mentions \"injury risk\", \"time constraints\" → Add to \"Obstacles\" (Life)\n\n=== CONDITIONAL BRANCHING LOGIC ===\n\n**Simple path (Questions 1-6 + 8)**: For well-defined domains (Power Query, Research, Life, Documentation)\n**Extended path (All 8 questions)**: For General/Other projects needing more clarification\n\n**Branch triggers**:\n- Q2 = \"Power Query\" → Ask about regulatory context in Q7 (Phase 0 detection)\n- Q2 = \"Research\" → Ask about research question, hypothesis, methodology in Q7\n- Q2 = \"Life\" → Ask about milestones, habits, tracking in Q7\n- Q2 = \"Documentation\" → Ask about audience, structure, tool in Q7\n- Q2 = \"General/Other\" → Ask generic requirements in Q7\n\n=== VALIDATION RULES ===\n\n**Required fields**: Q1, Q2, Q3, Q4, Q5, Q6, Q7\n**Optional fields**: Q6 deadline, Q8\n\n**Format validation**:\n- Q1: No leading/trailing whitespace, proper capitalization\n- Q3: Complete sentences (ends with period)\n- Q4: Valid technology names (warn if unrecognized, but allow)\n- Q5: Each goal starts with action verb (suggest improvements)\n- Q6: Valid timeline selection\n- Q7: Sufficient detail (>100 chars) for domain-specific requirements\n\n**Content validation** (warnings, not errors):\n- If Q2=\"Power Query\" but Q4 doesn't mention \"Power Query\" or \"Excel\" → Warn: \"Consider explicitly mentioning Power Query in tech stack\"\n- If Q2=\"Research\" but Q7 doesn't mention \"hypothesis\" or \"research question\" → Warn: \"Strong specs include research question and hypothesis\"\n- If timeline is \"Weekend\" but requirements seem complex → Warn: \"This may take longer than a weekend given the requirements\"\n\n=== ANSWER-TO-SPEC MAPPING ===\n\n**Common sections (all templates)**:\n1. **Title (H1)**: Q1 answer\n2. **What I'm Building / What I Want to Achieve (H2)**: Q3 with domain-appropriate prefix + keyword injection\n3. **Technology Stack (H2)**: Q4 parsed and formatted with required detection keywords added\n4. **Goals (H2)**: Q5 converted to checklist format\n5. **Timeline (H2)**: Q6 with optional deadline\n\n**Domain-specific sections**:\n\n**Power Query Template**:\n- H2: \"Regulatory Context\" (if mentioned in Q7/Q8) → Extract compliance details\n- H2: \"Data Sources\" → Parse from Q7\n- H2: \"Requirements & Deliverables\" → Must Have/Should Have from Q7\n- H2: \"Calculation Logic\" → Extract formulas from Q7\n- H2: \"Output Requirements\" → Format specs from Q7\n- H2: \"Known Challenges\" → M language complexity items from Q7/Q8\n- H2: \"Validation Requirements\" → How to verify correctness\n- H2: \"Additional Context\" → Q8 + stakeholders\n\n**Research Template**:\n- H2: \"Research Question\" → Extract from Q7 (required)\n- H2: \"Hypothesis\" → Extract from Q7 (required)\n- H2: \"Background & Motivation\" → Context from Q3 expanded\n- H2: \"Literature Review\" → Placeholder with guidance from Q7\n- H2: \"Methodology\" → Parse study design, data collection, analysis from Q7\n- H2: \"Timeline\" → Q6 broken into research phases\n- H2: \"Expected Outcomes\" → Derived from Q5 + Q7\n- H2: \"Ethical Considerations\" → From Q8 if mentioned\n- H2: \"Resources Needed\" → Extract from Q7/Q8\n- H2: \"Challenges & Limitations\" → From Q8\n\n**Life Projects Template**:\n- H2: \"What I Want to Achieve\" → Q3 with personal language\n- H2: \"Project Type\" → Category checkboxes based on Q3/Q7 keywords (Fitness, Learning, Home, etc.)\n- H2: \"Current Situation\" → Ask or derive from Q8\n- H2: \"What I Need to Do\"\n  - H3: \"Main Milestones\" → Parse from Q7\n  - H3: \"Weekly Habits\" → Parse from Q7\n- H2: \"Tracking & Accountability\" → Guidance based on Q7\n- H2: \"Resources & Budget\" → From Q7/Q8\n- H2: \"Potential Obstacles\" → From Q8\n- H2: \"Support System\" → From Q8 if mentioned\n\n**Documentation Template**:\n- H2: \"What I'm Creating\" → Q3 with doc type selection\n- H2: \"Purpose & Audience\" → Parse from Q7\n- H2: \"Scope & Content\" → Section outline from Q7\n- H2: \"Technology Stack\"\n  - H3: \"Documentation Tools\" → From Q4\n  - H3: \"Source Material\" → What's being documented\n- H2: \"Structure & Organization\" → Navigation structure from Q7\n- H2: \"Content Requirements\" → Standards from Q7\n- H2: \"Timeline & Milestones\" → Q6 broken into phases\n- H2: \"Maintenance Plan\" → Guidance\n- H2: \"Review & Quality Control\" → From Q7/Q8\n\n**General/Base Template**:\n- H2: \"Project Overview\" → Q3 expanded\n- H2: \"Technology Stack\" → Q4 formatted\n- H2: \"Goals & Objectives\" → Q5\n- H2: \"Features & Requirements\" → Q7 parsed into:\n  - H3: \"Core Features\" (must-have)\n  - H3: \"Additional Features\" (nice-to-have)\n- H2: \"Timeline & Phases\" → Q6 with milestones\n- H2: \"Technical Considerations\" → From Q7/Q8\n- H2: \"Constraints & Challenges\" → From Q8\n\n=== KEYWORD INJECTION STRATEGY (Preview for Task 100_2) ===\n\n**Injection points identified**:\n1. **Section prefixes** (Q3 answer): Add domain-specific intro phrases\n2. **Technology formatting** (Q4): Add synonyms and full names\n   - User: \"Power Query\" → Output: \"**Power Query** (M language)\"\n   - User: \"Python\" → Output: \"Python (for statistical analysis)\" [if Research]\n3. **Implicit keywords** (throughout): Sprinkle natural domain terms\n   - Power Query: \"regulatory calculation\", \"Excel workbook\", \"compliance\"\n   - Research: \"statistical analysis\", \"hypothesis testing\", \"literature review\"\n   - Life: \"personal goal\", \"track my progress\", \"fitness journey\"\n4. **Section headers**: Use detection-friendly terminology\n   - Research: Use \"Research Question\" not \"Objective\"\n   - Life: Use \"My\" language (\"What I Want\", \"My Goals\")\n5. **Examples and guidance**: Include domain-specific examples\n\n**Keyword density target**: 5-8 high-confidence keywords per 1000 words\n\n=== QUESTION ORDERING RATIONALE ===\n\n1. **Name first**: Establishes context, easy to answer\n2. **Type second**: Critical fork - determines all subsequent behavior\n3. **Description third**: User explains in their own words (keyword source)\n4. **Tech stack fourth**: Concrete, factual, boosts detection confidence\n5. **Goals fifth**: High-level, helps scope understanding\n6. **Timeline sixth**: Practical constraint, affects spec complexity\n7. **Requirements seventh**: Most detailed question, needs prior context\n8. **Additional last**: Catch-all for anything missed, truly optional\n\n**Flow characteristics**:\n- Front-loaded essentials (Q1-Q4) completed in 2 minutes\n- Mid-section planning (Q5-Q6) adds 2 minutes\n- Deep-dive requirements (Q7) takes 5-10 minutes (most time spent here)\n- Optional context (Q8) adds 0-3 minutes\n- **Total estimated time: 10-17 minutes for complete spec**\n\n=== ALIGNMENT WITH EXISTING TEMPLATES ===\n\n**Verified compatibility**:\n✓ All 4 spec templates reviewed (Power Query, Research, Life, Documentation)\n✓ Question flow covers all essential sections from each template\n✓ Domain-specific branches match template-specific sections\n✓ Keyword injection points align with template-selection-rules.md patterns\n✓ Output format matches template structure (H1 title, H2 sections, checklist goals, etc.)\n\n**Coverage matrix**:\n| Section Type | Power Query | Research | Life | Documentation | General |\n|--------------|-------------|----------|------|---------------|----------|\n| Title/Name | Q1 | Q1 | Q1 | Q1 | Q1 |\n| Description | Q3 | Q3 | Q3 | Q3 | Q3 |\n| Tech Stack | Q4 | Q4 | Q4 | Q4 | Q4 |\n| Goals | Q5 | Q5 | Q5 | Q5 | Q5 |\n| Timeline | Q6 | Q6 | Q6 | Q6 | Q6 |\n| Domain Reqs | Q7 | Q7 | Q7 | Q7 | Q7 |\n| Regulatory | Q7/Q8 | - | - | - | Q8 |\n| Hypothesis | - | Q7 | - | - | - |\n| Milestones | - | - | Q7 | Q6/Q7 | Q6 |\n| Audience | - | - | - | Q7 | - |\n| Challenges | Q8 | Q8 | Q8 | Q8 | Q8 |\n\n=== VALIDATION EXAMPLES ===\n\n**Good spec inputs** (would generate 85%+ confidence):\n- Q2: \"Power Query\", Q3: \"Implement regulatory pension calculations\", Q4: \"Power Query, Excel, SQL Server\", Q7: mentions formulas + compliance\n  → Expected confidence: 90%+ Power Query template\n\n- Q2: \"Research\", Q3: \"Study remote work impact on productivity\", Q4: \"Python, R, Qualtrics\", Q7: includes research question + hypothesis + statistical methods\n  → Expected confidence: 95%+ Research template\n\n- Q2: \"Personal\", Q3: \"Run half-marathon in under 2 hours\", Q4: \"Strava app, running shoes\", Q7: describes training milestones + weekly running schedule\n  → Expected confidence: 80%+ Life Projects template\n\n**Ambiguous inputs** (would need clarification):\n- Q2: \"General\", Q3: \"Analyze customer data\", Q4: \"Python\", Q7: \"Look at trends\"\n  → Expected confidence: 40% (too generic, would prompt for more details or suggest base template)\n\n=== NEXT STEPS FOR TASK 100_2 ===\n\nThis design provides:\n1. Clear injection points for keywords (Q3 prefix, Q4 formatting, section headers)\n2. Domain detection signal (Q2) for keyword selection\n3. User's natural language (Q3, Q7) for context-appropriate keyword placement\n4. Confidence scoring inputs (explicit tech mentions, domain-specific requirements)\n\nTask 100_2 will implement the actual keyword mapping and injection logic using these touchpoints.\n\n=== DESIGN VALIDATION ===\n\n✓ Question flow covers all essential spec sections\n✓ Aligns with 4 existing templates (Power Query, Research, Life, Documentation)\n✓ Provides clear validation rules for each question\n✓ Mapping from Q&A to spec sections is complete and unambiguous\n✓ Branching logic supports domain-specific requirements\n✓ Keyword injection touchpoints identified for Task 100_2\n✓ Estimated completion time reasonable (10-17 minutes)\n✓ Supports 85%+ template detection confidence when properly answered",
  "priority": "medium",
  "tags": ["ux-improvement", "specification", "design"],
  "estimated_hours": 1.5,
  "user_benefit": "Clear question flow makes spec creation intuitive and comprehensive"
}
