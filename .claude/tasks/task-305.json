{
  "id": "305",
  "title": "Fix template detection edge cases",
  "description": "Fix template detection issues in scripts/bootstrap.py:\n\n**Tie-breaking (line 113):**\n- When top 2 templates within 10% of each other, flag as ambiguous\n- Return both options with scores for user decision\n- Don't rely on dict iteration order\n\n**Confidence thresholds:**\n- If best score < 50%, suggest 'base' template with explanation\n- If scores are close, explain why each matched\n\n**Phase 0 implementation:**\n- Detect regulatory + ambiguity keywords as documented\n- Set Phase 0 flag when conditions met\n- Currently documented in bootstrap.md but not in code\n\n**Special condition scoring (lines 102-109):**\n- Review additive boosts for 'Power BI' etc.\n- Ensure they don't override clear pattern matches\n\n**Files to modify:**\n- scripts/bootstrap.py\n\n**Acceptance criteria:**\n- Ambiguous specs get user prompt, not arbitrary selection\n- Phase 0 triggers for regulatory + unclear requirements\n- Template selection is deterministic and explainable",
  "difficulty": 5,
  "status": "Finished",
  "created_date": "2026-01-22",
  "updated_date": "2026-01-22",
  "dependencies": [],
  "subtasks": [],
  "parent_task": null,
  "tags": ["bootstrap", "medium-priority", "template-detection"],
  "notes": "Implemented: (1) Ambiguity detection when top 2 templates within 15% of each other - returns alternatives list and explanation; (2) Phase 0 detection for regulatory keywords (gdpr, hipaa, sox, etc.) combined with ambiguity indicators (tbd, unclear, draft, etc.); (3) Low confidence handling with explanatory messages when best score < 5; (4) Special condition boosts capped to not override clear pattern matches; (5) Enhanced detect_template return value with is_ambiguous, alternatives, phase_0_required, explanation fields. CLI updated to display warnings.",
  "confidence": 75,
  "assumptions": [],
  "validation_status": "pending",
  "momentum": {
    "phase": "pending",
    "velocity": 0,
    "last_activity": "2026-01-22"
  },
  "decision_rationale": ""
}
