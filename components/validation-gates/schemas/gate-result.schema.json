{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Gate Result Schema",
  "description": "Validation result format for pre-execution, post-execution, and checkpoint gates",
  "type": "object",
  "required": ["gate", "task_id", "passed", "timestamp"],
  "properties": {
    "gate": {
      "type": "string",
      "enum": ["pre-execution", "post-execution", "checkpoint"],
      "description": "Type of validation gate that was executed"
    },
    "task_id": {
      "type": "string",
      "pattern": "^[0-9]+$",
      "description": "ID of the task being validated"
    },
    "passed": {
      "type": "boolean",
      "description": "Whether the gate validation passed overall"
    },
    "blocking_failures": {
      "type": "array",
      "description": "Critical issues that block task execution",
      "items": {
        "type": "object",
        "required": ["check", "message"],
        "properties": {
          "check": {
            "type": "string",
            "description": "Name of the check that failed"
          },
          "message": {
            "type": "string",
            "description": "Description of what failed"
          },
          "remediation": {
            "type": "string",
            "description": "How to fix this issue"
          }
        }
      },
      "default": []
    },
    "warnings": {
      "type": "array",
      "description": "Non-blocking issues that should be reviewed",
      "items": {
        "type": "string"
      },
      "default": []
    },
    "info": {
      "type": "array",
      "description": "Informational messages and suggestions",
      "items": {
        "type": "string"
      },
      "default": []
    },
    "auto_actions": {
      "type": "array",
      "description": "Actions automatically taken by the gate (e.g., parent task completion)",
      "items": {
        "type": "string"
      },
      "default": []
    },
    "timestamp": {
      "type": "string",
      "pattern": "^[0-9]{4}-[0-9]{2}-[0-9]{2} [0-9]{2}:[0-9]{2}:[0-9]{2}$",
      "description": "When the gate was executed (YYYY-MM-DD HH:MM:SS format)"
    }
  }
}
