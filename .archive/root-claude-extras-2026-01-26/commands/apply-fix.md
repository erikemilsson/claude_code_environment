# Apply Fix

## Purpose
Apply automated fixes generated by the self-healing system

## Context Required
- Diagnosis must be completed first
- Fix recommendations available in self-heal.md
- Backup system enabled

## Process

1. **Review available fixes**
   ```bash
   cat .claude/monitor/self-heal.md
   ```

2. **Test fix (dry run)**
   ```bash
   python3 .claude/monitor/scripts/self_heal.py --fix-id 1A --dry-run
   ```

3. **Apply specific fix**
   ```bash
   python3 .claude/monitor/scripts/self_heal.py --fix-id 1A
   ```

4. **Apply all safe fixes**
   ```bash
   python3 .claude/monitor/scripts/self_heal.py --all-safe
   ```

5. **Verify fix**
   - Run affected tests
   - Check system health
   - Review changes

## Output Location
- Fix report: `.claude/monitor/self-heal.md`
- Backups: `.claude/monitor/backups/`
- History: `.claude/monitor/history/resolutions/`

## Usage Examples

### Apply high-confidence fixes
```bash
# Preview fixes
python3 .claude/monitor/scripts/self_heal.py --all-safe --dry-run

# Apply if satisfied
python3 .claude/monitor/scripts/self_heal.py --all-safe
```

### Apply specific fix with testing
```bash
# Test fix first
python3 .claude/monitor/scripts/self_heal.py --fix-id 1A --test

# Apply if test passes
python3 .claude/monitor/scripts/self_heal.py --fix-id 1A

# With auto-rollback on failure
python3 .claude/monitor/scripts/self_heal.py --fix-id 1A --auto-rollback
```

### Rollback fixes
```bash
# Rollback specific fix
python3 .claude/monitor/scripts/rollback.py --fix-id 1A

# Rollback last applied fix
python3 .claude/monitor/scripts/rollback.py --last

# Rollback all fixes from session
python3 .claude/monitor/scripts/rollback.py --session
```

## Fix Types

### Automatic (High Confidence)
- Status refresh fixes
- Path validation
- Import corrections
- JSON syntax fixes

### Semi-Automatic (Medium Confidence)
- Retry logic additions
- Timeout adjustments
- Error handling improvements

### Manual Review Required (Low Confidence)
- Logic changes
- Algorithm modifications
- Architecture updates

## Safety Features
- **Automatic Backups**: All files backed up before modification
- **Validation**: Syntax and logic checks before applying
- **Testing**: Optional test run before application
- **Rollback**: One-command restoration
- **Dry Run**: Preview changes without applying

## Fix Confidence Levels
- **90-100%**: Auto-apply safe
- **70-89%**: Review recommended
- **50-69%**: Manual verification required
- **<50%**: Not recommended for auto-fix

## Notes
- Always created backups before applying fixes
- Test fixes in dry-run mode first
- Monitor system after applying fixes
- Keep fix history for analysis